{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Programming/NodeJs%20Learning/ecommerce-app/app/products/%5Bid%5D/page.js"],"sourcesContent":["'use client';\nimport { useState, useEffect, use } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\nexport default function ProductDetails({ params }) {\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [quantity, setQuantity] = useState(1);\n  const router = useRouter();\n  const { id: productId } = use(params); // Unwrap params with React.use()\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        const res = await axios.get(`/api/products/${productId}`);\n        setProduct(res.data);\n      } catch (err) {\n        setError(err.response?.data?.message || 'Failed to fetch product details.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProduct();\n  }, [productId]);\n\n  const handleAddToCart = () => {\n    alert(`Added ${quantity} ${product.name} to cart!`);\n  };\n\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this product?')) return;\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        router.push('/login');\n        return;\n      }\n      await axios.delete(`/api/products/${productId}`, {\n        headers: { Authorization: token }\n      });\n      alert('Product deleted successfully!');\n      router.push('/products');\n    } catch (err) {\n      alert(err.response?.data?.message || 'Failed to delete product');\n    }\n  };\n\n  if (loading) return (\n    <div className=\"flex justify-center items-center min-h-[60vh]\">\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n    </div>\n  );\n\n  if (error) return (\n    <div className=\"max-w-md mx-auto mt-10 p-6 bg-red-50 dark:bg-red-900/20 rounded-lg shadow-md text-center\">\n      <p className=\"text-red-600 dark:text-red-400\">{error}</p>\n      <button\n        onClick={() => router.push('/products')}\n        className=\"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n      >\n        Back to Products\n      </button>\n    </div>\n  );\n\n  if (!product) return null;\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <Link\n            href=\"/products\"\n            className=\"inline-flex items-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n          >\n            <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n            </svg>\n            Back to Products\n          </Link>\n          <div className=\"flex space-x-4\">\n            <Link\n              href={`/products/${productId}/edit`}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Edit Product\n            </Link>\n            <button\n              onClick={handleDelete}\n              className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors\"\n            >\n              Delete Product\n            </button>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden\">\n          <div className=\"md:flex\">\n            <div className=\"md:w-1/2\">\n              {product.images && product.images.length > 0 ? (\n                <div className=\"relative\">\n                  <Image\n                    src={product.images.find(img => img.isProminent)?.url || product.images[0].url}\n                    alt={product.name}\n                    width={500}\n                    height={500}\n                    className=\"w-full h-96 object-cover\"\n                  />\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 p-4\">\n                    <div className=\"flex space-x-2 overflow-x-auto\">\n                      {product.images.map((image, index) => (\n                        <Image\n                          key={index}\n                          src={image.url}\n                          alt={`${product.name} - Image ${index + 1}`}\n                          width={64}\n                          height={64}\n                          className=\"w-16 h-16 object-cover rounded cursor-pointer hover:ring-2 hover:ring-blue-500\"\n                          onClick={() => {\n                            const updatedImages = [...product.images];\n                            updatedImages.forEach(img => img.isProminent = false);\n                            updatedImages[index].isProminent = true;\n                            setProduct({ ...product, images: updatedImages });\n                          }}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"w-full h-96 bg-gray-200 dark:bg-gray-700 flex items-center justify-center\">\n                  <svg className=\"h-24 w-24 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                </div>\n              )}\n            </div>\n            <div className=\"p-8 md:w-1/2\">\n              <h1 className=\"text-3xl font-bold text-gray-800 dark:text-white mb-4\">{product.name}</h1>\n              <p className=\"text-2xl font-semibold text-blue-600 dark:text-blue-400 mb-4\">\n                ${product.price.toFixed(2)}\n              </p>\n              <div className=\"mb-6\">\n                <p className=\"text-gray-600 dark:text-gray-300 mb-4\">\n                  {product.description}\n                </p>\n                <p className=\"text-gray-600 dark:text-gray-300 mb-2\">\n                  <span className=\"font-medium\">Stock:</span> {product.stock}\n                </p>\n                <p className=\"text-gray-600 dark:text-gray-300\">\n                  <span className=\"font-medium\">Status:</span>{' '}\n                  <span className={product.stock > 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}>\n                    {product.stock > 0 ? 'In Stock' : 'Out of Stock'}\n                  </span>\n                </p>\n              </div>\n              {product.stock > 0 && (\n                <div className=\"mb-6\">\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Quantity\n                  </label>\n                  <div className=\"flex items-center\">\n                    <button\n                      onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                      className=\"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-l-lg\"\n                    >\n                      -\n                    </button>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      max={product.stock}\n                      value={quantity}\n                      onChange={(e) => setQuantity(Math.min(product.stock, Math.max(1, parseInt(e.target.value) || 1)))}\n                      className=\"w-16 text-center border-t border-b border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white\"\n                    />\n                    <button\n                      onClick={() => setQuantity(Math.min(product.stock, quantity + 1))}\n                      className=\"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-r-lg\"\n                    >\n                      +\n                    </button>\n                  </div>\n                </div>\n              )}\n              <button\n                onClick={handleAddToCart}\n                disabled={product.stock === 0}\n                className={`w-full py-3 rounded-lg transition-colors ${\n                  product.stock === 0\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-blue-600 hover:bg-blue-700 text-white'\n                }`}\n              >\n                {product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}