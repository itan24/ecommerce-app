{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Programming/NodeJs%20Learning/ecommerce-app/app/api/products/%5Bid%5D/route.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport jwt from 'jsonwebtoken';\nimport { User } from '../../../models/User';\nimport { Product } from '../../../models/Product';\n\nconst authMiddleware = (req) => {\n  const token = req.headers.get('authorization');\n  if (!token) throw new Error('No token provided');\n  return jwt.verify(token, process.env.JWT_SECRET);\n};\n\nexport async function GET(req, { params }) {\n  try {\n    await mongoose.connect(process.env.MONGO_URI);\n    const product = await Product.findById(params.id);\n    if (!product) {\n      return new Response(JSON.stringify({ message: 'Product not found' }), { status: 404 });\n    }\n    return new Response(JSON.stringify(product));\n  } catch (error) {\n    return new Response(JSON.stringify({ message: error.message }), { status: 500 });\n  }\n}\n\nexport async function PUT(req, { params }) {\n  try {\n    const token = req.headers.get('Authorization');\n    if (!token) {\n      return new Response(JSON.stringify({ message: 'Unauthorized' }), { status: 401 });\n    }\n\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\n    const user = await User.findById(decoded.id);\n    if (!user || user.role !== 'admin') {\n      return new Response(JSON.stringify({ message: 'Unauthorized' }), { status: 401 });\n    }\n\n    await mongoose.connect(process.env.MONGO_URI);\n    const body = await req.json();\n    const product = await Product.findByIdAndUpdate(params.id, body, { new: true });\n    if (!product) {\n      return new Response(JSON.stringify({ message: 'Product not found' }), { status: 404 });\n    }\n    return new Response(JSON.stringify(product));\n  } catch (error) {\n    return new Response(JSON.stringify({ message: error.message }), { status: 500 });\n  }\n}\n\nexport async function DELETE(req, { params }) {\n  try {\n    const token = req.headers.get('Authorization');\n    if (!token) {\n      return new Response(JSON.stringify({ message: 'Unauthorized' }), { status: 401 });\n    }\n\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\n    const user = await User.findById(decoded.id);\n    if (!user || user.role !== 'admin') {\n      return new Response(JSON.stringify({ message: 'Unauthorized' }), { status: 401 });\n    }\n\n    await mongoose.connect(process.env.MONGO_URI);\n    const product = await Product.findByIdAndDelete(params.id);\n    if (!product) {\n      return new Response(JSON.stringify({ message: 'Product not found' }), { status: 404 });\n    }\n    return new Response(JSON.stringify({ message: 'Product deleted successfully' }), { status: 200 });\n  } catch (error) {\n    return new Response(JSON.stringify({ message: error.message }), { status: 500 });\n  }\n}"],"names":[],"mappings":"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","debugId":null}}]
}