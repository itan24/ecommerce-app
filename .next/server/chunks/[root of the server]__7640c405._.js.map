{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Programming/NodeJs%20Learning/ecommerce-app/models/Product.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst productSchema = new mongoose.Schema({\n  name: String,\n  price: Number,\n  stock: Number,\n  description: String,\n  images: [{\n    url: String,\n    isProminent: { type: Boolean, default: false }\n  }]\n});\n\nexport default mongoose.models.Product || mongoose.model('Product', productSchema);"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,gBAAgB,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC;IACxC,MAAM;IACN,OAAO;IACP,OAAO;IACP,aAAa;IACb,QAAQ;QAAC;YACP,KAAK;YACL,aAAa;gBAAE,MAAM;gBAAS,SAAS;YAAM;QAC/C;KAAE;AACJ;uCAEe,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Programming/NodeJs%20Learning/ecommerce-app/app/api/products/route.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport jwt from 'jsonwebtoken';\nimport Product from '../../../models/Product';\n\nconst authMiddleware = (req) => {\n  const token = req.headers.get('authorization');\n  if (!token) throw new Error('No token provided');\n  return jwt.verify(token, process.env.JWT_SECRET);\n};\n\nexport async function GET(req) {\n  try {\n    await mongoose.connect(process.env.MONGO_URI);\n    const products = await Product.find();\n    return new Response(JSON.stringify(products), { status: 200 });\n  } catch (error) {\n    return new Response('Error fetching products: ' + error.message, { status: 500 });\n  }\n}\n\nexport async function POST(req) {\n  try {\n    const user = authMiddleware(req);\n    if (user.role !== 'admin') {\n      return new Response('Admins only', { status: 403 });\n    }\n    const body = await req.json();\n    await mongoose.connect(process.env.MONGO_URI);\n    const { name, price, stock, description, images } = body;\n    if (!name || !price || !stock || !description) {\n      return new Response('Missing required fields', { status: 400 });\n    }\n    const numericPrice = parseFloat(price);\n    const numericStock = parseInt(stock);\n    if (isNaN(numericPrice) || isNaN(numericStock)) {\n      return new Response('Invalid price or stock value', { status: 400 });\n    }\n    const product = new Product({\n      name,\n      price: numericPrice,\n      stock: numericStock,\n      description,\n      images: images || [] // JSON array for now; image uploads later\n    });\n    await product.save();\n    return new Response(JSON.stringify(product), { status: 201 });\n  } catch (error) {\n    console.error('Error creating product:', error);\n    return new Response('Error creating product: ' + error.message, { status: 400 });\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,iBAAiB,CAAC;IACtB,MAAM,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC;IAC9B,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;IAC5B,OAAO,uIAAA,CAAA,UAAG,CAAC,MAAM,CAAC,OAAO,QAAQ,GAAG,CAAC,UAAU;AACjD;AAEO,eAAe,IAAI,GAAG;IAC3B,IAAI;QACF,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,SAAS;QAC5C,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAO,CAAC,IAAI;QACnC,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,WAAW;YAAE,QAAQ;QAAI;IAC9D,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,SAAS,8BAA8B,MAAM,OAAO,EAAE;YAAE,QAAQ;QAAI;IACjF;AACF;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,OAAO,eAAe;QAC5B,IAAI,KAAK,IAAI,KAAK,SAAS;YACzB,OAAO,IAAI,SAAS,eAAe;gBAAE,QAAQ;YAAI;QACnD;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,SAAS;QAC5C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG;QACpD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,aAAa;YAC7C,OAAO,IAAI,SAAS,2BAA2B;gBAAE,QAAQ;YAAI;QAC/D;QACA,MAAM,eAAe,WAAW;QAChC,MAAM,eAAe,SAAS;QAC9B,IAAI,MAAM,iBAAiB,MAAM,eAAe;YAC9C,OAAO,IAAI,SAAS,gCAAgC;gBAAE,QAAQ;YAAI;QACpE;QACA,MAAM,UAAU,IAAI,mHAAA,CAAA,UAAO,CAAC;YAC1B;YACA,OAAO;YACP,OAAO;YACP;YACA,QAAQ,UAAU,EAAE,CAAC,0CAA0C;QACjE;QACA,MAAM,QAAQ,IAAI;QAClB,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,UAAU;YAAE,QAAQ;QAAI;IAC7D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,IAAI,SAAS,6BAA6B,MAAM,OAAO,EAAE;YAAE,QAAQ;QAAI;IAChF;AACF","debugId":null}}]
}